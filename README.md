## 요구사항 정리

### 도메인

- [x] 쿠폰
    - [x] 이름을 갖는다.
        - [x] NOT NULL
        - [x] 최대 30자 이하
    - [x] 할인 금액을 갖는다.
        - [x] 할인 금액 제약
            - [x] 1,000원 이상 10,000원 이하
            - [x] 500원 단위
        - [x] 할인율 제약
            - [x] 할인 금액/최소 주문 금액
                - [x] 소수점은 버림
            - [x] 3% 이상 20% 이하
    - [x] 최소 주문 금액을 갖는다.
        - [x] 5,000원 이상 100,000원 이하
    - [x] 카테고리를 갖는다.
        - [x] 네 가지 종류(패션, 가전, 가구, 식품)
        - [x] 두 개 이상을 고를 수는 없다.
    - [ ] 발급 기간을 갖는다.
        - [x] 시작일<=종료일
            - [x] 시작일 == 종료일일 경우 해당 일에만 발급 가능하다
            - [x] 시작일은 00:00:00.000000부터
            - [x] 종료일은 23:59:59:999999까지

- [x] 회원 쿠폰
    - [x] 회원 쿠폰 PK
    - [x] 쿠폰 PK
    - [x] 회원 PK
    - [x] 사용 여부
    - [x] 발급 일시
    - [x] 만료 일시
        - [x] 발급일 포함 7일 동안 사용 가능
            - [x] 만료일의 23:59:59.999999까지 사용 가능

---

### 1단계 요구사항

- [x] 쿠폰 생성 기능 구현
- [x] 쿠폰 조회 기능 구현
    - [x] 조회 기능은 부하 분산을 위해 reader DB의 데이터를 조회
- [x] 복제 지연으로 인한 이슈 확인
    - [x] 쿠폰을 생성한 후 즉시 조회했을 때 복제 지연으로 인해 데이터 조회에 실패하는 이슈 확인
- [x] 복제 지연으로 인한 이슈 해결
    - [x] 쿠폰을 생성했을 때, 의도한 대로 쿠폰이 생성됐는지 검증하도록 수정

---

### 2단계 요구사항

- [ ] 회원에게 쿠폰을 발급하는 기능 구현
    - [ ] 한 명의 회원은 동일한 쿠폰을 사용한 쿠폰을 포함하여 최대 5장까지 발급할 수 있다.
- [ ] 회원의 쿠폰 목록 조회 기능 구현
    - [ ] 쿠폰과 회원에게 발급된 쿠폰 테이블을 조인할 수 없다.
    - [ ] 회원의 쿠폰 목록 조회 시 쿠폰, 회원에게 발급된 쿠폰의 정보를 모두 보여줄 수 있어야 한다.
- [ ] 쿠폰 캐싱
    - [ ] 성능을 위해 쿠폰을 캐싱하고, 회원의 쿠폰 목록 조회 시 쿠폰 정보는 캐시를 통해 조회하도록 수정한다.

# 기능 분석

- [x] 쿠폰 발급
  - 최대 중복 가능한 5장 발급 가능
- [x] 쿠폰 목록 조회
  - member_copuon 테이블과 coupon 테이블은 조인할 수 없다.
  - 회원의 쿠폰 목록 조회 시 쿠폰, 회원에게 발급된 쿠폰의 정보를 모두 보여줘야 한다.
- [ ] 쿠폰 캐싱
  - 쿠폰을 캐싱하고, 회원의 쿠폰 목록 조회 시 쿠폰 정보는 캐시를 통해 조회한다.


# 쿠폰 캐싱 전략

### 고려해야 할 점
- DB가 분리된 환경이다.
- 하나의 쿠폰이 여러 개의 회원에게 발급될 수 있다.
  - 즉, member_coupon 이 coupon 보다 더 많이 발급될 가능성이 높다.
- member_coupon 조회 시 쿠폰 정보를 모두 함께 조회해야 한다.
- coupon 자체의 변경이 거의 없다.
- member_coupon 은 변경이 비교적 자주 일어난다.
  - 사용 여부 등

## 결론

결론적으로 쿠폰이라는 도메인에 대해 읽기 작업이 더 월등할 것이라고 예상

- 조회가 매우 빈번하고 동일한 쿠폰에 대해 반복적으로 조회할 일이 많다고 판단했다.
- 또한 하나의 쿠폰은 발행 가능할 경우 최소 한번 이상은 조회될 가능성이 높으며, 이미 발생한 가능한 쿠폰에 대해 수정될 일은 현저히 낮다고 판단했다.
- 하지만 쓰기 작업은 읽기에 비해 상대적으로 낮은 빈도이며 동시 사용이 불가능해야 하기 때문에 높은 정합성 필요했다.

따라서 Read-Through + Write-Through 조합을 사용, 자주 조회되는 쿠폰들에 대해서는 로컬 캐시에서 조회하며 일반적인 쿠폰은 글로벌 캐시인 레디스를 사용한다.

